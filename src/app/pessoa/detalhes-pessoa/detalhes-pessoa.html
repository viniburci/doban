<div class="container-fluid">
  <!-- Primeira Linha: Pessoa + Vagas + Impressﾃ｣o -->
  <div class="row">

    <!-- COLUNA 1: DETALHES DA PESSOA -->
    <div class="col-lg-3 col-md-4">
      @if (pessoa != null && errorMessage == null) {
        <div class="card">
          <div class="card-body">
            <!-- Header do Card -->
            <h5 class="card-title">{{ pessoa.nome || 'Nome nﾃ｣o disponﾃｭvel' }}</h5>
            <h6 class="card-subtitle">{{ pessoa.email || 'Email nﾃ｣o disponﾃｭvel' }}</h6>

            <!-- SEﾃﾃグ: CONTATO -->
            <div class="section-header">Contato</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Telefone</span>
                <span class="info-value">{{ pessoa.telefone || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Chave Pix</span>
                <span class="info-value">{{ pessoa.chavePix || '-' }}</span>
              </div>
            </div>

            <!-- SEﾃﾃグ: ENDEREﾃ⑯ -->
            <div class="section-header">Endereﾃｧo</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Logradouro</span>
                <span class="info-value">{{ pessoa.endereco || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Complemento</span>
                <span class="info-value">{{ pessoa.complemento || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Bairro</span>
                <span class="info-value">{{ pessoa.bairro || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Cidade/UF</span>
                <span class="info-value">{{ pessoa.cidade || '-' }}/{{ pessoa.estado || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">CEP</span>
                <span class="info-value">{{ pessoa.cep || '-' }}</span>
              </div>
            </div>

            <!-- SEﾃﾃグ: DOCUMENTOS -->
            <div class="section-header">Documentos</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">CPF</span>
                <span class="info-value">{{ pessoa.cpf || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">RG</span>
                <span class="info-value">{{ pessoa.numeroRg || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Emissﾃ｣o RG</span>
                <span class="info-value">{{ pessoa.dataEmissaoRg || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">UF RG</span>
                <span class="info-value">{{ pessoa.ufRg || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">PIS</span>
                <span class="info-value">{{ pessoa.pis || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Tﾃｭtulo Eleitor</span>
                <span class="info-value">{{ pessoa.tituloEleitor || '-' }}</span>
              </div>
            </div>

            <!-- SEﾃﾃグ: CTPS -->
            <div class="section-header">CTPS</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Nﾃｺmero</span>
                <span class="info-value">{{ pessoa.numeroCtps || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Sﾃｩrie</span>
                <span class="info-value">{{ pessoa.serieCtps || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Emissﾃ｣o</span>
                <span class="info-value">{{ pessoa.dataEmissaoCtps || '-' }}</span>
              </div>
            </div>

            <!-- SEﾃﾃグ: CNH -->
            <div class="section-header">CNH</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Nﾃｺmero</span>
                <span class="info-value">{{ pessoa.numeroCnh || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Categoria</span>
                <span class="info-value">{{ pessoa.categoriaCnh || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Registro</span>
                <span class="info-value">{{ pessoa.registroCnh || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Validade</span>
                <span class="info-value">{{ pessoa.validadeCnh || '-' }}</span>
              </div>
            </div>

            <!-- SEﾃﾃグ: DADOS PESSOAIS -->
            <div class="section-header">Dados Pessoais</div>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Nascimento</span>
                <span class="info-value">{{ pessoa.dataNascimento || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Local Nasc.</span>
                <span class="info-value">{{ pessoa.localNascimento || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Estado Civil</span>
                <span class="info-value">{{ pessoa.estadoCivil || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Mﾃ｣e</span>
                <span class="info-value">{{ pessoa.mae || '-' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Pai</span>
                <span class="info-value">{{ pessoa.pai || '-' }}</span>
              </div>
            </div>

            <!-- Botﾃ｣o Editar -->
            <a [routerLink]="['/pessoas', pessoa.id, 'editar']" class="btn btn-primary w-100 mt-3">
              Editar Informaﾃｧﾃｵes
            </a>
          </div>
        </div>
      }
      @else if (errorMessage != null) {
        <div class="alert alert-danger" role="alert">
          {{ errorMessage }}
        </div>
      }
    </div>

    <!-- COLUNA 2: VAGAS -->
    <div class="col-lg-6 col-md-5">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Vagas</h5>

          @if ((vagasPessoa()?.length || 0) > 0) {
            @for(vaga of vagasPessoa(); track vaga.id) {
              <app-card-vaga [vaga]="vaga" (editarVaga)="editarVaga($event)"></app-card-vaga>
            }
          } @else {
            <div class="empty-state">
              <div class="empty-state-icon">搭</div>
              <p class="empty-state-text">Nenhuma vaga registrada</p>
            </div>
          }

          <button class="btn btn-primary w-100 mt-3" (click)="toggleRegistrarVaga()">
            Registrar Nova Vaga
          </button>
        </div>
      </div>
    </div>

    <!-- COLUNA 3: IMPRESSﾃグ -->
    <div class="col-lg-3 col-md-3">
      <div class="card print-section">
        <div class="card-body">
          <h5 class="card-title">Documentos</h5>
          <div class="print-buttons">
            <button class="btn btn-success">
              塘 Imprimir Vaga
            </button>
            <button class="btn btn-danger">
              搭 Imprimir Contrato
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SEﾃﾃグ DE RECURSOS COM TABS -->
  <div class="recursos-tabs">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Recursos</h5>

        <!-- Nav Tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="celulares-tab" data-bs-toggle="tab"
                    data-bs-target="#celulares" type="button" role="tab">
              導 Celulares ({{ celularesList()?.length || 0 }})
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="carros-tab" data-bs-toggle="tab"
                    data-bs-target="#carros" type="button" role="tab">
              囓 Carros ({{ carrosList()?.length || 0 }})
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="rocadeiras-tab" data-bs-toggle="tab"
                    data-bs-target="#rocadeiras" type="button" role="tab">
              肌 Roﾃｧadeiras ({{ rocadeirasList()?.length || 0 }})
            </button>
          </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content mt-4">

          <!-- TAB: CELULARES -->
          <div class="tab-pane fade show active" id="celulares" role="tabpanel">
            <div class="row">
              @if ((celularesList()?.length || 0) > 0) {
                @for(recursoCelular of celularesList(); track recursoCelular.id) {
                  <div class="col-lg-4 col-md-6 mb-3">
                    <app-card-recurso-celular
                      [recurso]="recursoCelular"
                      (editarRecurso)="editarRecurso('celular', $event)"
                      (updated)="updateComponent()">
                    </app-card-recurso-celular>
                  </div>
                }
              } @else {
                <div class="col-12">
                  <div class="empty-state">
                    <div class="empty-state-icon">導</div>
                    <p class="empty-state-text">Nenhum celular registrado</p>
                  </div>
                </div>
              }
            </div>
            <button class="btn btn-primary mt-3" (click)="toggleRegistrarRecurso('celular')">
              Registrar Celular
            </button>
          </div>

          <!-- TAB: CARROS -->
          <div class="tab-pane fade" id="carros" role="tabpanel">
            <div class="row">
              @if ((carrosList()?.length || 0) > 0) {
                @for(recursoCarro of carrosList(); track recursoCarro.id) {
                  <div class="col-lg-4 col-md-6 mb-3">
                    <app-card-recurso-carro
                      [recurso]="recursoCarro"
                      (editarRecurso)="editarRecurso('carro', $event)"
                      (updated)="updateComponent()">
                    </app-card-recurso-carro>
                  </div>
                }
              } @else {
                <div class="col-12">
                  <div class="empty-state">
                    <div class="empty-state-icon">囓</div>
                    <p class="empty-state-text">Nenhum carro registrado</p>
                  </div>
                </div>
              }
            </div>
            <button class="btn btn-primary mt-3" (click)="toggleRegistrarRecurso('carro')">
              Registrar Carro
            </button>
          </div>

          <!-- TAB: ROﾃ②DEIRAS -->
          <div class="tab-pane fade" id="rocadeiras" role="tabpanel">
            <div class="row">
              @if ((rocadeirasList()?.length || 0) > 0) {
                @for(recursoRocadeira of rocadeirasList(); track recursoRocadeira.id) {
                  <div class="col-lg-4 col-md-6 mb-3">
                    <app-card-recurso-rocadeira
                      [recurso]="recursoRocadeira"
                      (editarRecurso)="editarRecurso('rocadeira', $event)"
                      (updated)="updateComponent()">
                    </app-card-recurso-rocadeira>
                  </div>
                }
              } @else {
                <div class="col-12">
                  <div class="empty-state">
                    <div class="empty-state-icon">肌</div>
                    <p class="empty-state-text">Nenhuma roﾃｧadeira registrada</p>
                  </div>
                </div>
              }
            </div>
            <button class="btn btn-primary mt-3" (click)="toggleRegistrarRecurso('rocadeira')">
              Registrar Roﾃｧadeira
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- FORMULﾃヽIOS DE REGISTRO -->
  @if(showRegistrarVaga()) {
    <div class="card mt-4 fade-in">
      <div class="card-body">
        <app-cadastro-vaga #vagaForm appScrollOnRender (updated)="handleUpdateAndClose()"
          [editVaga]="editVaga() ? editVaga() : null" (close)="handleOnlyClose()"
          (closeForm)="handleOnlyClose()" [pessoaId]="pessoaId()">
        </app-cadastro-vaga>
      </div>
    </div>
  }

  @if (showRegistrarRecurso()) {
    <div class="card mt-4 fade-in">
      <div class="card-body">
        <app-cadastro-recurso-base #recursoForm appScrollOnRender
          [config]="getActiveConfig()"
          [pessoaId]="pessoaId()"
          [editRecurso]="editRecurso()"
          (updated)="handleUpdateAndClose()"
          (closeForm)="handleOnlyClose()">
        </app-cadastro-recurso-base>
      </div>
    </div>
  }
</div>
